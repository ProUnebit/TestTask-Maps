{"version":3,"sources":["js\\main.js"],"names":["controlPanelLoadingText","document","querySelector","controlPanelSwitcherButton","controlPanelSelect","controlPanelLogo","mapBoxYandex","getElementById","mapBox2gis","dataM24","displaySwitcher","addEventListener","style","visibility","setAttribute","cursor","display","src","removeAttribute","ymaps","ready","init","myMap","Map","center","zoom","fetch","then","textContent","res","json","data","showMapPointsYandex","showMapPoints2gis","catch","console","error","err","color","myGeoObjects","GeoObjectCollection","preset","strokeWidth","geodesic","map","district","points","add","Placemark","point","address","lon","lat","hintContent","header","balloonContent","geoObjects","DG","markers","featureGroup","coordinates","myIcon","icon","iconUrl","iconSize","i","length","marker","label","addTo","bindPopup","setTimeout","e","target","value","removeAll","separatedTargetDistrict","filter"],"mappings":"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","file":"main.ee847ad5.map","sourceRoot":"..","sourcesContent":["const controlPanelLoadingText = document.querySelector('.control-panel-box__loading-text')\r\nconst controlPanelSwitcherButton = document.querySelector('.control-panel-box__switcher-button')\r\nconst controlPanelSelect = document.querySelector('.control-panel-box__form-select')\r\nconst controlPanelLogo = document.querySelector('.control-panel-box__logo')\r\nconst mapBoxYandex = document.getElementById('map-1')\r\nconst mapBox2gis = document.getElementById('map-2')\r\n\r\nlet dataM24\r\nlet displaySwitcher = false\r\n\r\ncontrolPanelSwitcherButton.addEventListener('click', () => {\r\n    if (!displaySwitcher) {\r\n        mapBox2gis.style.visibility = 'visible'\r\n        controlPanelSelect.setAttribute('disabled', true)\r\n        controlPanelSelect.style.cursor = 'not-allowed'\r\n        mapBoxYandex.style.display = 'none'\r\n        mapBox2gis.style.display = 'block'\r\n        controlPanelLogo.src = 'https://upload.wikimedia.org/wikipedia/commons/c/c1/2GIS_logo.svg'\r\n        displaySwitcher = true\r\n        return;\r\n    } else if (displaySwitcher) {\r\n        mapBox2gis.style.visibility = 'hidden'\r\n        controlPanelSelect.removeAttribute('disabled')\r\n        controlPanelSelect.style.cursor = ''\r\n        mapBoxYandex.style.display = 'block'\r\n        mapBox2gis.style.display = 'none'\r\n        controlPanelLogo.src = 'https://upload.wikimedia.org/wikipedia/commons/9/91/Yandex_logo_en.svg'\r\n        displaySwitcher = false\r\n    }\r\n})\r\n\r\nymaps.ready(init)\r\n\r\nfunction init() {\r\n\r\n    let myMap = new ymaps.Map(\"map-1\", {\r\n        center: [55.76, 37.64],\r\n        zoom: 12\r\n    })\r\n\r\n\r\n    fetch('https://raw.githubusercontent.com/ProUnebit/Reminder_ToMe_Reminder/master/src/data.json')\r\n        .then(res => {\r\n            controlPanelLoadingText.textContent = 'Обработка данных... ⏳'\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            dataM24 = data;\r\n            showMapPointsYandex(data, 'orange')\r\n            return data\r\n        })\r\n        .then(data => {\r\n            controlPanelLoadingText.textContent = 'Yandex карта загружена ✔️'\r\n            showMapPoints2gis(data)\r\n        })\r\n        .catch(err => console.error(err));\r\n\r\n\r\n    const showMapPointsYandex = (dataM24, color) => {\r\n\r\n        let myGeoObjects = new ymaps.GeoObjectCollection({}, {\r\n            preset: `islands#${color}CircleIcon`,\r\n            strokeWidth: 4,\r\n            geodesic: true\r\n        });\r\n\r\n        dataM24.map(district => district.points.map(point => {\r\n            myGeoObjects.add(new ymaps.Placemark([point.address.lon, point.address.lat], {\r\n                hintContent: `<div class=\"hintContent\">\r\n                <span>${district.header}</span>\r\n                </div>`,\r\n                balloonContent: `<div class=\"balloonContent\">\r\n                <p>${district.header}</p>\r\n                <p>${point.address.address}</p>\r\n                </div>`\r\n            }))\r\n        }))\r\n\r\n        myMap.geoObjects.add(myGeoObjects)\r\n    }\r\n\r\n    const showMapPoints2gis = dataM24 => {\r\n\r\n        DG.then(function() {\r\n\r\n            let map,\r\n                markers = DG.featureGroup(),\r\n                coordinates = [],\r\n                myIcon = DG.icon({\r\n                    iconUrl: 'https://mbtskoudsalg.com/images/map-marker-icons-png-3.png',\r\n                    iconSize: [26, 30]\r\n                })\r\n\r\n            map = DG.map('map-2', {\r\n                center: [55.76, 37.64],\r\n                zoom: 12\r\n            })\r\n\r\n\r\n            dataM24.map(district => {\r\n                for (let i = 0; i < district.points.length; i++) {\r\n                    coordinates[0] = district.points[i].address.lon\r\n                    coordinates[1] = district.points[i].address.lat\r\n                    DG.marker(coordinates, {\r\n                            icon: myIcon,\r\n                            label: `\r\n                     <div class=\"hintContent\">\r\n                        <span style=\"font-size: 17px\">${district.header}</span>\r\n                     </div>`\r\n                        })\r\n                        .addTo(markers)\r\n                        .bindPopup(`\r\n                        <di class=\"balloonContent\">\r\n                        <p style=\"margin-bottom: 5px;\">${district.header}</p>\r\n                        <p>${district.points[i].address.address}</p>\r\n                        </di>`)\r\n                }\r\n            })\r\n\r\n            markers.addTo(map)\r\n\r\n            setTimeout(() => controlPanelLoadingText.textContent = '2GIS карта загружена ✔️', 1200)\r\n            setTimeout(() => controlPanelLoadingText.textContent = 'Карты готовы 👌', 1800)\r\n        });\r\n    }\r\n\r\n    controlPanelSelect.addEventListener('change', e => {\r\n        if (e.target.value === 'Все') {\r\n            myMap.geoObjects.removeAll()\r\n            showMapPointsYandex(dataM24, 'orange')\r\n        } else {\r\n            let separatedTargetDistrict = dataM24.filter(district => district.header === e.target.value)\r\n            myMap.geoObjects.removeAll()\r\n            showMapPointsYandex(separatedTargetDistrict, 'violet')\r\n        }\r\n    })\r\n}"]}